import React from 'react';

type Locale = 'ka' | 'en';

type Dict = Record<string, string>;

const dictionaries: Record<Locale, Dict> = {
	ka: {
		'common.all': 'ყველა',
		'common.active': 'აქტიური',
		'common.inactive': 'არააქტიური',
		'common.refresh': 'განახლება',
		'common.searchByName': 'ძებნა სახელით',
		'common.addOffer': 'შეთავაზების დამატება',
		'common.addProduct': 'პროდუქტის დამატება',
		'common.perPage': 'გვერდზე',
		'common.showing': 'ნაჩვენებია',
		'common.of': 'დან',
		'common.results': 'შედეგი',
		'common.previous': 'წინა',
		'common.next': 'შემდეგი',
			'common.filters': 'ფილტრები',
			'common.sortBy': 'დალაგება',
			'common.toggleSortDirection': 'დალაგების მიმართულების შეცვლა',
			'common.toggleDensity': 'სიჟანგის რეჟიმი',
			'common.compact': 'კომპაქტური',
			'common.comfortable': 'კომფორტული',
			'common.clearAll': 'გასუფთავება',
			'common.error': 'შეცდომა',
			'common.retry': 'კიდევ სცადე',
			'common.save': 'შენახვა',
			'common.confirm': 'დადასტურება',
			'common.na': 'N/A',
			'common.descriptionMissing': 'აღწერა არ არის',
			'common.selected': 'არჩეულია',
			'common.setActive': 'აქტიურად დაყენება',
			'common.setInactive': 'არააქტიურად დაყენება',
			'common.newest': 'უახლესი',
			'common.activeFilters': 'აქტიური ფილტრები:',

		'dashboard.discounts': 'შეთავაზებები',
		'table.discount': 'შეთავაზება',
		'table.description': 'აღწერა',
		'table.price': 'ფასი',
		'table.status': 'სტატუსი',
		'table.created': 'შექმნის თარიღი',
		'table.actions': 'ქმედებები',
		'table.discountPercent': 'ფასდაკლება %',
		'table.finalPrice': 'საბოლოო ფასი',

		'discount.edit': 'ფასდაკლების რედაქტირება',
		'discount.toggleTitle': 'ფასდაკლების ჩართვა/გამორთვა',
		'discount.turnOffConfirm': 'ეს გამორთავს ფასდაკლებას ამ პროდუქტისთვის. გავაგრძელოთ?',
		'discount.turnOnConfirm': 'ეს ჩართავს ფასდაკლებას ამ პროდუქტისთვის. გავაგრძელოთ?',

		'products.empty': 'პროდუქტები არ მოიძებნა. შექმენით პირველი პროდუქტი! ',
		'offers.setPercent': 'დააყენე %',

			'products.title': 'პროდუქტის მართვა',
			'products.subtitle': 'მართეთ პროდუქტები, სურათები და მასობრივი მოქმედებები',

			// Company
			'company.title': 'კომპანიის მართვა',
			'company.manage': 'მართვა: {name}',
			'company.back': 'დაბრუნება',
			'company.noSelected': 'კომპანია არ არის არჩეული',
			'company.selectPrompt': 'გთხოვთ, აირჩიოთ კომპანია სამართავად.',
			'company.sidebar.company': 'კომპანია',
			'company.sidebar.profile': 'პროფილი',
			'company.sidebar.hours': 'სამუშაო საათები',
			'company.sidebar.contacts': 'კონტაქტები',
			'company.sidebar.presence': 'ონლაინ არხები',
			'company.sidebar.social': 'სოციალური მედია',
			'company.sidebar.gallery': 'გალერეა',
			'company.sidebar.documents': 'დოკუმენტები',
			'company.sidebar.operations': 'ოპერაციები',
			'company.sidebar.zones': 'მიწოდების ზონები',
			'company.sidebar.branches': 'ფილიალები',
			'company.profile.title': 'კომპანიის პროფილი',
			'company.profile.companyName': 'კომპანიის სახელი',
			'company.profile.status': 'სტატუსი',
			'company.profile.address': 'მისამართი',
			'company.profile.city': 'ქალაქი',
			'company.profile.postalCode': 'საფოსტო ინდექსი',
			'company.profile.country': 'ქვეყანა',
			'company.profile.edit': 'რედაქტირება',
			'company.profile.update': 'კომპანიის განახლება',
			'company.hours.title': 'სამუშაო საათები',
			'company.hours.edit': 'საათების რედაქტირება',
			'company.hours.closed': 'დაკრულია',
		'company.hours.open': 'ღიაა',
			'company.contacts.title': 'კომპანიის კონტაქტები',
			'company.contacts.add': 'კონტაქტის დამატება',
			'company.contacts.phone': 'ტელეფონი',
			'company.contacts.email': 'ელფოსტა',
			'company.contacts.address': 'მისამართი',
		// Social
		'company.social.add': 'სოციალური მედიის დამატება',
			'company.gallery.title': 'კომპანიის გალერეა',
		'company.gallery.add': 'სურათის დამატება',
		'company.gallery.imageFile': 'სურათის ფაილი',
			'company.documents.title': 'კომპანიის დოკუმენტები',
		'company.documents.add': 'დოკუმენტის დამატება',
		'company.documents.type': 'დოკუმენტის ტიპი',
		'company.documents.file': 'დოკუმენტის ფაილი',
		'company.documents.status': 'სტატუსი',
			'company.zones.title': 'მიწოდების ზონები',
		'company.zones.add': 'ზონის დამატება',
		'company.zones.name': 'ზონის სახელი',
		'company.zones.type': 'ზონის ტიპი',
		'company.zones.typeRadius': 'რადიუსი',
		'company.zones.typePolygon': 'პოლიგონი',
		'company.zones.centerLat': 'ცენტრის განედა',
		'company.zones.centerLng': 'ცენტრის გრძედი',
		'company.zones.radius': 'რადიუსი (მეტრი)',
			'company.branches.title': 'კომპანიის ფილიალები',
		'company.branches.add': 'ფილიალის დამატება',
		'company.branches.name': 'ფილიალის დასახელება',
		'company.branches.address': 'ფილიალის მისამართი',
		'company.branches.image': 'ფილიალის სურათი',
		'company.branches.noAddress': 'მისამართი არ არის მითითებული',
		// Placeholders
		'placeholder.phoneExample': '+995 5XX XXX XXX',
		'placeholder.emailExample': 'name@company.com',
		'placeholder.addressExample': 'ქ. თბილისი, ქუჩა 1',
		'placeholder.socialPlatforms': 'Facebook, Instagram, X',
		'placeholder.url': 'https://...',
		'placeholder.docTypeExample': 'ბიზნეს ლიცენზია, საგადასახადო სერტიფიკატი',
		'placeholder.zoneNameExample': 'ცენტრი, ჩრდილოეთი უბანი',
		'placeholder.latExample': '41.7151',
		'placeholder.lngExample': '44.8271',
		'placeholder.radiusExample': '5000',

			// Analytics
			'analytics.title': 'ანალიტიკა',
			'analytics.subtitle': 'შეაფასეთ თქვენი შედეგები და მომხმარებელთა ქცევა',
			'analytics.period.all': 'მთელი პერიოდი',
			'analytics.period.7d': 'ბოლო 7 დღე',
			'analytics.period.30d': 'ბოლო 30 დღე',
			'analytics.period.90d': 'ბოლო 90 დღე',
			'analytics.period.1y': 'ბოლო წელი',
			'analytics.allDiscounts': 'ყველა შეთავაზება',
			'analytics.device': 'მოწყობილობა',
			'analytics.city': 'ქალაქი',
			'analytics.region': 'რეგიონი',
			'analytics.export': 'ექსპორტი',
			'analytics.performanceCharts': 'წარმადობის გრაფიკები',
			'analytics.noData': 'მონაცემები არაა',
			'analytics.noDataForFilters': 'ამ ფილტრებისთვის ანალიტიკური მონაცემები არ არის.',
			'analytics.tabs.devices': 'მოწყობილობები',
			'analytics.tabs.trends': 'ტენდენციები',
			'analytics.tabs.demographics': 'დემოგრაფია',
			'analytics.tabs.active': 'აქტიური დრო',
			'analytics.tabs.retention': 'რიტენშენი',
			'analytics.generateReport': 'რეპორტის გენერაცია',
			'analytics.total': 'სულ',
			'analytics.unknown': 'უცნობი',
			'analytics.performanceTrends': 'წარმადობის ტრენდები',
			'analytics.noTimeSeriesData': 'დროითი რიგის მონაცემები არ არის',
			'analytics.noDeviceData': 'მოწყობილობების მონაცემები არ არის',
			'analytics.ageDistribution': 'ასაკობრივი განაწილება',
			'analytics.noAgeData': 'ასაკობრივი მონაცემები არ არის',
			'analytics.percentage': 'პროცენტი',
			'analytics.users': 'მომხმარებლები',
			'analytics.geoDistribution': 'გეოგრაფიული განაწილება',
			'analytics.noLocationData': 'ლოკაციის მონაცემები არ არის',
			'analytics.noLocationBreakdown': 'ლოკაციების დაყოფა არ არის',
			'analytics.byHour': 'დღის საათების მიხედვით',
			'analytics.noHourlyData': 'საათობრივი მონაცემები არ არის',
			'analytics.byDayOfWeek': 'კვირის დღეების მიხედვით',
			'analytics.noDowData': 'დღე-კვირის მონაცემები არ არის',
			'analytics.retention': 'რიტენშენი',
			'analytics.noRetentionData': 'რიტენშენის მონაცემები არ არის',
			'analytics.uniqueUsers': 'უნიკალური მომხმარებლები',
			'analytics.returningUsers': 'დაბრუნებადი მომხმარებლები',
			'analytics.retentionRate': 'შენარჩუნების მაჩვენებელი',
			'analytics.topDiscounts': 'ყველაზე პოპულარული შეთავაზებები',
			'analytics.byViews': 'ნახვების მიხედვით',
			'analytics.byClicks': 'კლიკების მიხედვით',
			'analytics.byOutbound': 'გადამისამართებების მიხედვით',
			'analytics.byAddress': 'მისამართის ნახვების მიხედვით',
			'analytics.byShares': 'გაზიარებების მიხედვით',
			'analytics.byFavorites': 'შენახვების მიხედვით',
			'analytics.byNotInterested': 'არ დაინტერესებულები',
			'analytics.metric.views': 'ნახვები',
			'analytics.metric.clicks': 'კლიკები',
			'analytics.metric.redirects': 'გადამისამართებები',
		'analytics.metric.ctr': 'CTR',

			// Analytics device labels
			'analytics.device.all': 'ყველა',
			'analytics.device.mobile': 'მობილური',
			'analytics.device.desktop': 'დესკტოპი',
			'analytics.device.tablet': 'ტაბლეტი',

		// Days short
		'days.mon': 'ორშაბათი',
		'days.tue': 'სამშაბათი',
		'days.wed': 'ოთხშაბათი',
		'days.thu': 'ხუთშაბათი',
		'days.fri': 'პარასკევი',
		'days.sat': 'შაბათი',
		'days.sun': 'კვირა',

		// Common extras
		'common.notSpecified': 'მითითებული არაა',
		'common.delete': 'წაშლა',

			// Common extra
			'common.edit': 'რედაქტირება',
			'common.cancel': 'გაუქმება',
			'common.update': 'განახლება',
			'common.add': 'დამატება',
			'common.loading': 'იტვირთება...',

			// Navigation / breadcrumb
			'nav.dashboard': 'დეშბორდი',
			'nav.offers': 'შეთავაზებები',
			'nav.addOffer': 'შეთავაზების დამატება',
			'nav.productManagement': 'პროდუქტის მართვა',
			'nav.companyManagement': 'კომპანიის მართვა',
			'nav.analytics': 'ანალიტიკა',
			'nav.notifications': 'შეტყობინებები',
			'nav.featured': 'გამორჩეული',
			'nav.billing': 'ბილინგი',
			'nav.profile': 'პროფილი',
	},
	en: {
		'common.all': 'All',
		'common.active': 'Active',
		'common.inactive': 'Inactive',
		'common.refresh': 'Refresh',
		'common.searchByName': 'Search by name',
		'common.addOffer': 'Add Offer',
		'common.addProduct': 'Add Product',
		'common.perPage': 'Per page',
		'common.showing': 'Showing',
		'common.of': 'of',
		'common.results': 'Results',
		'common.previous': 'Previous',
		'common.next': 'Next',
		'common.sortBy': 'Sort by',
		'common.toggleSortDirection': 'Toggle sort direction',
		'common.toggleDensity': 'Toggle density',
		'common.compact': 'Compact',
		'common.comfortable': 'Comfortable',
		'common.clearAll': 'Clear All',
		'common.error': 'Error',
		'common.retry': 'Try again',
		'common.save': 'Save',
		'common.confirm': 'Confirm',
		'common.na': 'N/A',
		'common.descriptionMissing': 'No description',
		'common.selected': 'selected',
		'common.setActive': 'Set Active',
		'common.setInactive': 'Set Inactive',

		'dashboard.discounts': 'Discounts',
		'table.discount': 'Discount',
		'table.description': 'Description',
		'table.price': 'Price',
		'table.status': 'Status',
		'table.created': 'Created',
		'table.actions': 'Actions',
		'table.discountPercent': 'Discount %',
		'table.finalPrice': 'Final Price',

		'discount.edit': 'Edit Discount',
		'discount.toggleTitle': 'Toggle discount active',
		'discount.turnOffConfirm': 'This will turn the discount OFF for this product. Continue?',
		'discount.turnOnConfirm': 'This will turn the discount ON for this product. Continue?',

		'products.empty': 'No products found. Create your first product to get started!',
		'offers.setPercent': 'Set %',

			'products.title': 'Product Management',
			'products.subtitle': 'Manage your products, images, and bulk operations',

			// Company
			'company.title': 'Company Management',
			'company.manage': 'Manage {name}',
			'company.back': 'Back',
			'company.noSelected': 'No Company Selected',
			'company.selectPrompt': 'Please select a company to manage.',
			'company.sidebar.company': 'Company',
			'company.sidebar.profile': 'Profile',
			'company.sidebar.hours': 'Business Hours',
			'company.sidebar.contacts': 'Contacts',
			'company.sidebar.presence': 'Presence',
			'company.sidebar.social': 'Social Media',
			'company.sidebar.gallery': 'Gallery',
			'company.sidebar.documents': 'Documents',
			'company.sidebar.operations': 'Operations',
			'company.sidebar.zones': 'Delivery Zones',
			'company.sidebar.branches': 'Branches',
			'company.profile.title': 'Company Profile',
			'company.profile.companyName': 'Company Name',
			'company.profile.status': 'Status',
			'company.profile.address': 'Address',
			'company.profile.city': 'City',
			'company.profile.postalCode': 'Postal Code',
			'company.profile.country': 'Country',
			'company.profile.edit': 'Edit',
			'company.profile.update': 'Update Company',
			'company.hours.title': 'Business Hours',
			'company.hours.edit': 'Edit Hours',
			'company.hours.closed': 'Closed',
		'company.hours.open': 'Open',
			'company.contacts.title': 'Company Contacts',
			'company.contacts.add': 'Add Contact',
			'company.contacts.phone': 'Phone',
			'company.contacts.email': 'Email',
			'company.contacts.address': 'Address',
		// Social
		'company.social.add': 'Add Social Media',
			'company.gallery.title': 'Company Gallery',
			'company.gallery.add': 'Add Image',
		'company.gallery.imageFile': 'Image File',
			'company.documents.title': 'Company Documents',
			'company.documents.add': 'Add Document',
		'company.documents.type': 'Document Type',
		'company.documents.file': 'Document File',
		'company.documents.status': 'Status',
			'company.zones.title': 'Delivery Zones',
			'company.zones.add': 'Add Zone',
		'company.zones.name': 'Zone Name',
		'company.zones.type': 'Zone Type',
		'company.zones.typeRadius': 'Radius',
		'company.zones.typePolygon': 'Polygon',
		'company.zones.centerLat': 'Center Latitude',
		'company.zones.centerLng': 'Center Longitude',
		'company.zones.radius': 'Radius (meters)',
			'company.branches.title': 'Company Branches',
			'company.branches.add': 'Add Branch',
		'company.branches.name': 'Branch Name',
		'company.branches.address': 'Branch Address',
		'company.branches.image': 'Branch Image',
		'company.branches.noAddress': 'No address specified',
		// Placeholders
		'placeholder.phoneExample': '+1-555-123-4567',
		'placeholder.emailExample': 'contact@company.com',
		'placeholder.addressExample': '123 Business St, City, State, ZIP',
		'placeholder.socialPlatforms': 'Facebook, Instagram, Twitter',
		'placeholder.url': 'https://...',
		'placeholder.docTypeExample': 'Business License, Tax Certificate',
		'placeholder.zoneNameExample': 'Downtown, North Area',
		'placeholder.latExample': '40.7128',
		'placeholder.lngExample': '-74.0060',
		'placeholder.radiusExample': '5000',

			// Analytics
			'analytics.title': 'Analytics',
			'analytics.subtitle': 'Track your performance and user behavior',
			'analytics.period.all': 'All time',
			'analytics.period.7d': 'Last 7 days',
			'analytics.period.30d': 'Last 30 days',
			'analytics.period.90d': 'Last 90 days',
			'analytics.period.1y': 'Last year',
			'analytics.allDiscounts': 'All discounts',
			'analytics.device': 'Device',
			'analytics.city': 'City',
			'analytics.region': 'Region',
			'analytics.export': 'Export',
			'analytics.performanceCharts': 'Performance Charts',
			'analytics.noData': 'No data',
			'analytics.noDataForFilters': 'No analytics data for the selected filters.',
			'analytics.tabs.devices': 'Devices',
			'analytics.tabs.trends': 'Trends',
			'analytics.tabs.demographics': 'Demographics',
			'analytics.tabs.active': 'Active Time',
			'analytics.tabs.retention': 'Retention',
			'analytics.generateReport': 'Generate Report',
			'analytics.total': 'Total',
			'analytics.unknown': 'Unknown',
			'analytics.performanceTrends': 'Performance Trends',
			'analytics.noTimeSeriesData': 'No time series data',
			'analytics.noDeviceData': 'No device data',
			'analytics.ageDistribution': 'Age Distribution',
			'analytics.noAgeData': 'No age data',
			'analytics.percentage': 'Percentage',
			'analytics.users': 'Users',
			'analytics.geoDistribution': 'Geographic Distribution',
			'analytics.noLocationData': 'No location data',
			'analytics.noLocationBreakdown': 'No location breakdown',
			'analytics.byHour': 'By Hour of Day',
			'analytics.noHourlyData': 'No hourly data',
			'analytics.byDayOfWeek': 'By Day of Week',
			'analytics.noDowData': 'No day-of-week data',
			'analytics.retention': 'Retention',
			'analytics.noRetentionData': 'No retention data',
			'analytics.uniqueUsers': 'Unique users',
			'analytics.returningUsers': 'Returning users',
			'analytics.retentionRate': 'Retention rate',
			'analytics.topDiscounts': 'Top Discounts',
			'analytics.byViews': 'By Views',
			'analytics.byClicks': 'By Clicks',
			'analytics.byOutbound': 'By Outbound',
			'analytics.byAddress': 'By Address Views',
			'analytics.byShares': 'By Shares',
			'analytics.byFavorites': 'By Favorites',
			'analytics.byNotInterested': 'Not Interested',
			'analytics.metric.views': 'Views',
			'analytics.metric.clicks': 'Clicks',
			'analytics.metric.redirects': 'Redirects',
		'analytics.metric.ctr': 'CTR',

			// Analytics device labels
			'analytics.device.all': 'All',
			'analytics.device.mobile': 'Mobile',
			'analytics.device.desktop': 'Desktop',
			'analytics.device.tablet': 'Tablet',

		// Days
		'days.mon': 'Monday',
		'days.tue': 'Tuesday',
		'days.wed': 'Wednesday',
		'days.thu': 'Thursday',
		'days.fri': 'Friday',
		'days.sat': 'Saturday',
		'days.sun': 'Sunday',

		// Common extras
		'common.notSpecified': 'Not specified',
		'common.delete': 'Delete',

			// Common extra
			'common.edit': 'Edit',
			'common.cancel': 'Cancel',
			'common.update': 'Update',
			'common.add': 'Add',
			'common.loading': 'Loading...',

			// Navigation / breadcrumb
			'nav.dashboard': 'Dashboard',
			'nav.offers': 'Offers',
			'nav.addOffer': 'Add Offer',
			'nav.productManagement': 'Product Management',
			'nav.companyManagement': 'Company Management',
			'nav.analytics': 'Analytics',
			'nav.notifications': 'Notifications',
			'nav.featured': 'Featured',
			'nav.billing': 'Billing',
			'nav.profile': 'Profile'
	},
};

interface I18nCtx {
	locale: Locale;
	setLocale: (l: Locale) => void;
	t: (key: string) => string;
}

const I18nContext = React.createContext<I18nCtx | undefined>(undefined);

export const I18nProvider: React.FC<{ children: React.ReactNode; defaultLocale?: Locale }> = ({ children, defaultLocale = 'ka' }) => {
	const [locale, setLocale] = React.useState<Locale>(() => (localStorage.getItem('locale') as Locale) || defaultLocale);

	React.useEffect(() => {
		localStorage.setItem('locale', locale);
	}, [locale]);

	const t = React.useCallback((key: string) => {
		const dict = dictionaries[locale] || dictionaries.ka;
		return dict[key] || dictionaries.en[key] || key;
	}, [locale]);

	return (
		<I18nContext.Provider value={{ locale, setLocale, t }}>
			{children}
		</I18nContext.Provider>
	);
};

export const useI18n = () => {
	const ctx = React.useContext(I18nContext);
	if (!ctx) throw new Error('useI18n must be used within I18nProvider');
	return ctx;
};


